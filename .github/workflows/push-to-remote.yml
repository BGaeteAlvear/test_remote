name: Push to other remote
on: 
  pull_request:
    types: [opened, synchronize]

env:
  REMOTE_URL: ${{ secrets.REMOTE_INNOVAWEB }}

jobs:
  push:
    runs-on: ubuntu-latest
    steps:

    - uses: actions/checkout@v2
      with:
        fetch-depth: 0
        
    - name: Check remote URL
      run: |
        echo "Remote URL is $REMOTE_URL"
        if [ -z "$REMOTE_URL" ]; then
          echo "REMOTE_URL is missing"
          exit 1
        fi
    
    - name: Setup Git
      run: |
        git config user.name "GitHub Actions Bot"
        git config user.email "actions@github.com"
             
    - name: Checkout repository
      uses: actions/checkout@v2
      with: 
        fetch-depth: 0

    - name: Push changes
      run: |
        git push $REMOTE_URL HEAD:${{ github.base_ref }}
